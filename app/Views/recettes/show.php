<?php use Cookasian\Models\FavorisModel; $estConnecte = !empty($_SESSION['utilisateur']['id'] ?? null); $estFavori = false; // VÃ©rifie si la recette est en favoris if ($estConnecte && !empty($recette['id'])) { $favorisModel = new FavorisModel(); $estFavori = $favorisModel->estFavori( (int)$_SESSION['utilisateur']['id'], (int)$recette['id'] ); } // normalisation du chemin image $image = $recette['image_url']; if (!str_starts_with($image, '/assets/')) { $image = '/assets/images/recettes/' . $image; } ?> <article class="recette"> <header class="entete-recette"> <h1><?= htmlspecialchars($recette['titre']) ?></h1> </header> <figure class="image-recette"> <img src="<?= htmlspecialchars($image) ?>" alt="<?= htmlspecialchars($recette['titre']) ?>"> <figcaption> Recette <?= htmlspecialchars($recette['titre']) ?> (<?= htmlspecialchars($recette['pays_origine']) ?>) </figcaption> </figure> <section class="infos-recette"> <h2>Informations</h2> <ul> <li>Pays dâ€™origine : <?= htmlspecialchars($recette['pays_origine']) ?></li> <li>DifficultÃ© : <?= htmlspecialchars($recette['difficulte']) ?></li> <li>PrÃ©paration : <?= htmlspecialchars($recette['temps_preparation']) ?> min</li> <li>Cuisson : <?= htmlspecialchars($recette['temps_cuisson']) ?> min</li> <li>Portions : <?= htmlspecialchars($recette['nombre_personnes']) ?> personnes</li> </ul> </section> <section class="description-recette"> <h2>Description</h2> <p><?= nl2br(htmlspecialchars($recette['description'])) ?></p> </section> <!-- â­ FAVORIS --> <section class="favori-recette"> <?php if ($estConnecte): ?> <footer class="actions-recette"> <?php if ($estFavori): ?> <!-- DESKTOP --> <a class="bouton clair desktop-only" href="/favoris/supprimer/<?= (int)$recette['id'] ?>"> Retirer des favoris </a> <a class="bouton secondaire desktop-only" href="/mon-compte"> Voir mes favoris </a> <!-- MOBILE --> <a class="bouton clair mobile-only" href="/favoris/supprimer/<?= (int)$recette['id'] ?>"> ğŸ’” Retirer </a> <a class="bouton secondaire mobile-only" href="/mon-compte"> â­ Mes favoris </a> <?php else: ?> <!-- DESKTOP --> <a class="bouton primaire desktop-only" href="/favoris/ajouter/<?= (int)$recette['id'] ?>"> Ajouter aux favoris </a> <a class="bouton secondaire desktop-only" href="/mon-compte"> Voir mes favoris </a> <!-- MOBILE --> <a class="bouton primaire mobile-only" href="/favoris/ajouter/<?= (int)$recette['id'] ?>"> â¤ï¸ Ajouter </a> <a class="bouton secondaire mobile-only" href="/mon-compte"> â­ Mes favoris </a> <?php endif; ?> </footer> <?php else: ?> <div class="bloc-connexion-recette"> <p class="texte-connexion"> Connecte-toi pour ajouter cette recette Ã  tes favoris. </p> <a class="bouton primaire bouton-connexion" href="/connexion"> Se connecter </a> </div> <?php endif; ?> </section> <section class="ingredients-recette"> <h2>IngrÃ©dients</h2> <ul> <?php foreach ($recette['ingredients'] as $ingredient): ?> <li><?= htmlspecialchars($ingredient['quantite']) ?> <?= htmlspecialchars($ingredient['nom']) ?></li> <?php endforeach; ?> </ul> </section> <section class="etapes-recette"> <h2>PrÃ©paration</h2> <ol> <?php foreach ($recette['etapes'] as $etape): ?> <li><?= htmlspecialchars($etape['description']) ?></li> <?php endforeach; ?> </ol> </section> <nav class="navigation-recette"> <a href="/recettes" class="bouton-retour">â† Retour Ã  la liste des recettes</a> </nav> </article>